<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout/default">

<th:block layout:fragment="css">
</th:block>

<th:block layout:fragment="script">
    <script>
        $(function() {
            $("#MailSend").on('click', function () {
                mailsend();
            });
        });

        function mailsend() {

            var formData = new FormData(document.getElementById('frmreg'));

            var token = $("meta[name='_csrf']").attr("content");
            var header = $("meta[name='_csrf_header']").attr("content");
            $(document).ajaxSend(function (e, xhr, options) {
                xhr.setRequestHeader(header, token);
            });

            $.ajax({
                url: '/mailsend',
                type: 'post',
                data: formData,
                processData: false,
                contentType: false,
                enctype: 'multipart/form-data',
                cache: false,
                error:function(request,status,error){
                    ajaxErrorMsg(request);
                },
                success: function (res) {
                    if (!Ajax.checkResult(res)) {
                        return;
                    }
                    alert('메일전송 성공');
                    location.href = "/mailtest";
                }
            });
        }
    </script>
</th:block>>
    <div layout:fragment="content" class="content">
        <br/>
    <!--<form action="/mailsend" method="POST">-->
        <form id ="frmreg" name="frmreg" enctype="multipart/form-data">
            <div align="center">
                <h4>Email Send</h4>
                <input type="text" size="120" style="width:60%" placeholder="상대의 이메일" class="form-control" >
                <button id="MailSend" class="c-button c-button--point">메일 보내기</button>
            </div>
        </form>
    </div>
</html>